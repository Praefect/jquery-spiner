/*! jquery spiner - v0.1.0 - 2013-08-20
* https://github.com/amazingSurge/jquery-spiner
* Copyright (c) 2013 amazingSurge; Licensed GPL */
(function(t){var s=t.spinner=function(e,n){this.element=e,this.$element=t(e),this.options=t.extend({},s.defaults,n),this.namespace=this.options.namespace,this.enabled=!0,this.step=this.options.step,this.value=this.options.value,this.classes={enabled:this.namespace+"_enable",skin:this.namespace+"_"+this.options.skin},this.init()};s.prototype={constructor:s,init:function(){var s=this;this.$control=t('<div class="'+this.namespace+'-control"><span class="'+this.namespace+'-prev"></span><span class="'+this.namespace+'-next"></span></div>'),this.$prev=this.$control.find("."+this.namespace+"-prev"),this.$next=this.$control.find("."+this.namespace+"-next"),this.$element.wrap('<div tabindex="0" class="'+this.namespace+'-wrap"></div>'),this.$wrap=this.$element.parent(),this.$wrap.addClass(this.classes.enable),this.$element.addClass(this.namespace),null!==this.options.skin&&this.$wrap.addClass(this.classes.skin),this.$control.appendTo(this.$wrap),this.$prev.on("click",function(){return s.prev.call(s),!1}),this.$next.on("click",function(){return s.next.call(s),!1}),this.$element.on("focus",function(){return s._set(s.value),!1}).on("blur",function(){var e=s.$element.val().replace(" ","");return t.isNumeric(e)===!1&&(e=s.value),"min"===s.isOutOfBounds(e)&&(e=s.options.min),"max"===s.isOutOfBounds(e)&&(e=s.options.max),s.set(e),!1}),this.$wrap.on("blur",function(){return s.set(s.value),!1}),this.$element.on("focus",function(){s.$element.on("keydown",function(t){var e=t.keyCode||t.which;return 38===e?(s.next(),!1):40===e?(s.prev(),!1):void 0})}).on("blur",function(){s.$element.off("keydown")}),this.set(this.value)},isNumber:function(s){return"number"==typeof s&&t.isNumeric(s)?!0:!1},isOutOfBounds:function(t){return this.options.min>t?"min":t>this.options.max?"max":!1},_set:function(t){this.enable!==!1&&(this.value=t,this.$element.val(t))},set:function(s){this.enable!==!1&&(this.value=s,"function"===t.type(this.options.callback)&&(s=this.options.callback(s)),this.$element.val(s))},get:function(){return this.value},prev:function(){return t.isNumeric(this.value)||(this.value=0),this.value=parseInt(this.value)-parseInt(this.step),"min"===this.isOutOfBounds(this.value)&&(this.value=this.options.looping===!0?this.options.max:this.options.min),this._set(this.value),this},next:function(){return t.isNumeric(this.value)||(this.value=0),this.value=parseInt(this.value)+parseInt(this.step),"max"===this.isOutOfBounds(this.value)&&(this.value=this.options.looping===!0?this.options.min:this.options.max),this._set(this.value),this},enable:function(){return this.enabled=!0,this.$wrap.addClass(this.classes.enabled),this},disable:function(){return this.enabled=!1,this.$wrap.removeClass(this.classes.enabled),this},destroy:function(){this.$prev.off("click"),this.$next.off("click"),this.$element.off("keyup")}},s.defaults={namespace:"spinner",skin:null,value:0,min:-10,max:10,step:1,looping:!0,callback:function(t){return t+" minutes"}},t.fn.spinner=function(e){if("string"==typeof e){var n=e,i=arguments.length>1?Array.prototype.slice.call(arguments,1):void 0;return this.each(function(){var s=t.data(this,"spinner");"function"==typeof s[n]&&s[n].apply(s,i)})}return this.each(function(){t.data(this,"spinner")||t.data(this,"spinner",new s(this,e))})}})(jQuery);